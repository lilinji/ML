PG数量的设置牵扯到数据分布的均匀性问题。

 预设Ceph集群中的PG数至关重要，公式如下: `（**结果必须舍入到最接近2的N次幂的值)**`

```
PG 总数 = (OSD 数 * 100) / 最大副本数
 ```

集群中单个池的PG数计算公式如下：`(**结果必须舍入到最接近2的N次幂的值)**`

```
PG 总数 = (OSD 数 * 100) / 最大副本数 / 池数
```

PGP是为了实现定位而设计的PG，PGP的值应该和PG数量保持一致；pgp_num 数值才是 CRUSH 算法采用的真实值。
虽然 pg_num 的增加引起了PG的分割，但是只有当 pgp_num增加以后，数据才会被迁移到新PG中，这样才会重新开始平衡。

**pg_num计算器**

[https://ceph.com/pgcalc/](https://ceph.com/pgcalc/)
